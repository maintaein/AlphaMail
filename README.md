# ğŸ“§ AlphaMail
**ë¯¸ë˜í˜• ì—…ë¬´ í™˜ê²½ì„ ì œì•ˆí•˜ëŠ” AI ê¸°ë°˜ ì—…ë¬´ ìë™í™” ì›¹ ì„œë¹„ìŠ¤**

AlphaMailì€ ì´ë©”ì¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ë‹¤ì–‘í•œ ì—…ë¬´ë¥¼ AIê°€ ìë™ìœ¼ë¡œ ì •ë¦¬í•˜ê³ , ë‹¨ìˆœ ì‘ì—…ê¹Œì§€ ëŒ€ì‹  ìˆ˜í–‰í•˜ëŠ” í˜ì‹ ì ì¸ ì—…ë¬´ í™˜ê²½ì„ ì§€í–¥í•©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” íŠ¹ì§•
- **ğŸ¤– AI ì—…ë¬´ ë¹„ì„œ**: ë©”ì¼ ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ í™ˆ ëŒ€ì‹œë³´ë“œì— ì—…ë¬´ë¥¼ ì •ë¦¬í•˜ê³  ìˆ˜í–‰
- **ğŸ“¬ ìŠ¤ë§ˆíŠ¸ ë©”ì¼ ì„œë¹„ìŠ¤**: AI ê¸°ë°˜ ìŠ¤ë ˆë“œ ìš”ì•½ê³¼ ìë™ ë©”ì¼ ì‘ì„± ê¸°ëŠ¥
- **ğŸ’¬ ì „ì—­ ì±—ë´‡**: ëª¨ë“  í™”ë©´ì—ì„œ ë™ì‘í•˜ëŠ” ì—…ë¬´ ì§€ì› ì±—ë´‡
- **ğŸ“‹ ë¬¸ì„œ ì‘ì—… ìë™í™”**: ê±°ë˜ì²˜, ë°œì£¼ì„œ, ê²¬ì ì„œ ê´€ë¦¬ ë“± ë¬¸ì„œ ì—…ë¬´ ìë™ ì²˜ë¦¬

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì„±
- **Backend** (Spring Boot + Java 17) - í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë° API
- **Frontend** (React/Vue + Nginx) - ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- **RAG Server** (Python) - ë¬¸ì„œ ê²€ìƒ‰ ë° ë²¡í„° DB ì²˜ë¦¬
- **OCR Server** (Node.js) - ë¬¸ì„œ ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **MCP Server/Client** - AI ë„êµ¬ í˜¸ì¶œ ë° ì²˜ë¦¬
- **Chatbot** (Python) - ì „ì—­ AI ì±—ë´‡ ì„œë¹„ìŠ¤

### ë°ì´í„°ë² ì´ìŠ¤ ë° ì €ì¥ì†Œ
- PostgreSQL (ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤)
- Redis (ìºì‹± ë° ì„¸ì…˜)
- Chroma DB (ë²¡í„° ì €ì¥ì†Œ)
- AWS S3 (íŒŒì¼ ì €ì¥ì†Œ)

## ğŸš€ í•µì‹¬ ê¸°ëŠ¥

### 1. AI ì—…ë¬´ ë¹„ì„œ
- ë©”ì¼ ë‚´ìš© ìë™ ë¶„ì„ ë° ë¶„ë¥˜
- ì²¨ë¶€íŒŒì¼(ì‚¬ì—…ìë“±ë¡ì¦ ë“±) OCR ì²˜ë¦¬
- ì—…ë¬´ë³„ ìë™ ë“±ë¡ ë° ì²˜ë¦¬
- í™ˆ ëŒ€ì‹œë³´ë“œ í†µí•© ê´€ë¦¬

### 2. ë©”ì¼ ì„œë¹„ìŠ¤
- ìŠ¤ë ˆë“œ ê¸°ë°˜ ë©”ì¼ ì´ë ¥ ê´€ë¦¬
- AI ê¸°ë°˜ ë©”ì¼ ìš”ì•½
- í…œí”Œë¦¿ ê¸°ë°˜ ìë™ ë‹µì¥ ìƒì„±
- ë²¡í„° DB ê¸°ë°˜ ë¹ ë¥¸ ê²€ìƒ‰

### 3. AI ì±—ë´‡
- ì‹¤ì‹œê°„ ì—…ë¬´ ì§€ì›
- ì¼ì • ë“±ë¡/ì¡°íšŒ
- ë°œì£¼ì„œ/ê²¬ì ì„œ ê²€ìƒ‰
- ì „ì—­ ì ‘ê·¼ì„±

### 4. ë¬¸ì„œ ì‘ì—…
- ê²¬ì ì„œ ìë™ ìƒì„± ë° ë¬¸ì„œí™”
- ë°œì£¼ì„œ ì²˜ë¦¬
- ê±°ë˜ì²˜ ê´€ë¦¬
- ì›í´ë¦­ ë¬¸ì„œ ì¶œë ¥

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### í•µì‹¬ ê¸°ìˆ : MCP (Model Context Protocol)
- AIì—ê²Œ ë„êµ¬(tool)ë¥¼ ì œê³µí•˜ì—¬ ë§¥ë½ì— ë§ëŠ” ì‘ì—… ìˆ˜í–‰
- LLM í˜¸ì¶œ ë°©ì‹ ëŒ€ë¹„ ì •í™•í•˜ê³  ì•ˆì •ì ì¸ ê²°ê³¼ ì¶œë ¥
- ë‹¤ì–‘í•œ AI ëª¨ë¸ì— ëŒ€í•œ ë†’ì€ í˜¸í™˜ì„±

### ë°±ì—”ë“œ
- **Spring Boot 3.4.5** (Java 17)
- **Spring Security** - ì¸ì¦/ì¸ê°€
- **Spring Data JPA** - ë°ì´í„°ë² ì´ìŠ¤ ORM
- **PostgreSQL** - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤
- **Redis** - ìºì‹± ë° ì„¸ì…˜ ê´€ë¦¬
- **JWT** - í† í° ê¸°ë°˜ ì¸ì¦

### í”„ë¡ íŠ¸ì—”ë“œ
- **React/Vue** - ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- **Nginx** - ì›¹ ì„œë²„ ë° ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ

### AI & ML
- **Anthropic Claude** - ë©”ì¸ LLM
- **Chroma DB** - ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **Custom OCR** - ë¬¸ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **MCP Protocol** - AI ë„êµ¬ ì—°ë™

### ì¸í”„ë¼
- **Docker & Docker Compose** - ì»¨í…Œì´ë„ˆí™”
- **AWS S3** - íŒŒì¼ ì €ì¥ì†Œ
- **AWS SES** - ì´ë©”ì¼ ì„œë¹„ìŠ¤

## ğŸ“Š ê¸°ëŒ€ íš¨ê³¼
- **â° ì—…ë¬´ íš¨ìœ¨ì„± ê·¹ëŒ€í™”**: ë‹¨ìˆœ ì‘ì—… ì‹œê°„ ë‹¨ì¶•ìœ¼ë¡œ ì¤‘ìš” ì—…ë¬´ ì§‘ì¤‘
- **ğŸ¯ ìŠ¤ë§ˆíŠ¸í•œ ì—…ë¬´ ì§€ì›**: ê°œì¸ ë§ì¶¤í˜• AI ë¹„ì„œ ê²½í—˜
- **ğŸŒ± ì¡°ì§ ì„±ì¥ ì§€ì›**: ì‹ ì…/ê²½ë ¥ì ëª¨ë‘ ë¹ ë¥¸ ì ì‘ ê°€ëŠ¥í•œ ì—…ë¬´ ì‹œìŠ¤í…œ
- **ğŸ“ˆ ê¸°ì—… ê°€ì¹˜ í–¥ìƒ**: ì¼í•˜ê¸° ì¢‹ì€ í™˜ê²½ ì¡°ì„±ìœ¼ë¡œ ë¸Œëœë“œ ê°€ì¹˜ ìƒìŠ¹

## ğŸ¬ ë°ëª¨ ì‹œë‚˜ë¦¬ì˜¤
ì‹¤ì œ ì˜ì—…ì‚¬ì›ì˜ í•˜ë£¨ ì—…ë¬´ë¥¼ í†µí•´ AlphaMailì˜ íš¨ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”:

1. **ì¶œê·¼ í›„ ì—…ë¬´ í™•ì¸** - 9ê±´ì˜ ì•ˆ ì½ì€ ë©”ì¼ì´ ìë™ìœ¼ë¡œ ì •ë¦¬ëœ ì—…ë¬´ë¡œ ë³€í™˜
2. **ê±°ë˜ì²˜ ë“±ë¡** - ì²¨ë¶€ëœ ì‚¬ì—…ìë“±ë¡ì¦ì„ AIê°€ ìë™ìœ¼ë¡œ ì½ì–´ ë“±ë¡
3. **ê²¬ì  ìš”ì²­ ì²˜ë¦¬** - ì‹¤ì‹œê°„ ë©”ì¼ ìˆ˜ì‹  ì‹œ ìë™ ì—…ë¬´ ìƒì„± ë° ì²˜ë¦¬
4. **ìŠ¤ë§ˆíŠ¸í•œ ë‹µì¥** - ìŠ¤ë ˆë“œ ìš”ì•½ì„ í†µí•œ ë¹ ë¥¸ ìƒí™© íŒŒì•… ë° í…œí”Œë¦¿ ê¸°ë°˜ ë‹µì¥
5. **ë©€í‹°íƒœìŠ¤í‚¹** - ì±—ë´‡ì„ í†µí•œ ì¼ì • ë“±ë¡ê³¼ ë°œì£¼ì„œ ì²˜ë¦¬ ë™ì‹œ ì§„í–‰

**ê²°ê³¼**: ê¸°ì¡´ 30ë¶„ ì´ìƒ ì†Œìš”ë˜ë˜ ì—…ë¬´ë¥¼ 5ë¶„ ë§Œì— ì™„ë£Œ!

---

> **AlphaMail** - ë‹¨ìˆœí•œ ë„êµ¬ë¥¼ ë„˜ì–´ì„œ, ì¼í•˜ê¸° ì¢‹ì€ í™˜ê²½ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.
-----
-----
-----

# ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

## ê¸°ìˆ  ìŠ¤íƒ ì„¸ë¶€ì‚¬í•­
### í•µì‹¬ í”„ë ˆì„ì›Œí¬

- Spring Boot 3.4.5 (Java 17)
- Spring Security - ì¸ì¦/ì¸ê°€
- Spring Data JPA - ORM
- Spring Data Redis - ìºì‹±/ì„¸ì…˜ ê´€ë¦¬
- Spring WebFlux - WebClientìš© ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°

### ë°ì´í„°ë² ì´ìŠ¤ & ì €ì¥ì†Œ

- PostgreSQL - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤
- Redis - ìºì‹± ë° ì„¸ì…˜ ìŠ¤í† ì–´

### ì´ë©”ì¼ & í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤

- AWS SES (Simple Email Service) - ì´ë©”ì¼ ë°œì†¡
- AWS S3 - íŒŒì¼ ì €ì¥
- Jakarta Mail API - ì´ë©”ì¼ ì²˜ë¦¬

### ë³´ì•ˆ & ì¸ì¦

- JWT (JJWT 0.11.5) - JSON Web Token ê¸°ë°˜ ì¸ì¦
- Spring Security - ë³´ì•ˆ í”„ë ˆì„ì›Œí¬

### ìœ í‹¸ë¦¬í‹° & ë„êµ¬

- MapStruct 1.5.5 - ê°ì²´ ë§¤í•‘
- Lombok - ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ ì œê±°
- P6Spy - SQL ì¿¼ë¦¬ ë¡œê¹…
- Jackson - JSON ì²˜ë¦¬
- Checkstyle - ì½”ë”© ì»¨ë²¤ì…˜ (ë„¤ì´ë²„ ìŠ¤íƒ€ì¼)

### ë¹Œë“œ & ë°°í¬

- Gradle 8.13 - ë¹Œë“œ ë„êµ¬
- Docker - ì»¨í…Œì´ë„ˆí™”
- Eclipse Temurin JDK 17 - ëŸ°íƒ€ì„
  
## ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ ë°°ê²½

### Spring Boot 3.4.5 + Java 17 ë„ì…
work, ì¼ì •, ë©”ì¼ ë“± ë‹¤ì–‘í•œ ì—…ë¬´ìš© ê¸°ëŠ¥ì„ AIì–´ì‹œìŠ¤í„´íŠ¸ì™€ ì—°ë™í•˜ê¸° ìœ„í•´ **ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ê³¼ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ **Spring Boot 3.4.5ì™€ Java 17**ì„ ì„ íƒí•˜ì—¬ ê°€ìƒ ìŠ¤ë ˆë“œì™€ í–¥ìƒëœ GC ì„±ëŠ¥ì„ í†µí•´ **ë™ì‹œì„± ì²˜ë¦¬ ëŠ¥ë ¥ì„ ê·¹ëŒ€í™”**í–ˆìŠµë‹ˆë‹¤.

### PostgreSQL + Redis ë“€ì–¼ ì €ì¥ì†Œ
ì´ë©”ì¼ ë©”íƒ€ë°ì´í„°ëŠ” **ë³µì¡í•œ ê´€ê³„í˜• ì¿¼ë¦¬**ê°€ í•„ìš”í•˜ê³ , ì„¸ì…˜ê³¼ ìºì‹œëŠ” **ë¹ ë¥¸ ì ‘ê·¼ ì†ë„**ê°€ ìš”êµ¬ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ **PostgreSQLì„ ë©”ì¸ DBë¡œ, Redisë¥¼ ìºì‹± ë° ì„¸ì…˜ ìŠ¤í† ì–´**ë¡œ êµ¬ì„±í•˜ì—¬ ë°ì´í„° íŠ¹ì„±ì— ë§ëŠ” ìµœì í™”ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.

## DDD ì•„í‚¤í…ì²˜ ì ìš©

### ë³µì¡í•œ ë„ë©”ì¸ ë¶„ë¦¬ í•„ìš”ì„±
ì´ë©”ì¼, AI ìë™í™”, ERP ì—°ë™ì´ë¼ëŠ” **ì„œë¡œ ë‹¤ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì»¨í…ìŠ¤íŠ¸**ê°€ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì— ê³µì¡´í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **DDDì˜ ë°”ìš´ë””ë“œ ì»¨í…ìŠ¤íŠ¸**ë¥¼ ì ìš©í•˜ì—¬ ê° ë„ë©”ì¸ì„ ë…ë¦½ì ìœ¼ë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

```
api/
â”œâ”€â”€ email/          # ì´ë©”ì¼ ë„ë©”ì¸ - RFC í‘œì¤€ ì¤€ìˆ˜, ìŠ¤ë ˆë“œ ê´€ë¦¬
â”œâ”€â”€ assistants/     # AI ìë™í™” ë„ë©”ì¸ - ì„ì‹œ ë°ì´í„° â†’ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°  
â”œâ”€â”€ user/           # ì‚¬ìš©ì ë„ë©”ì¸ - ì¸ì¦, ê¶Œí•œ ê´€ë¦¬
â”œâ”€â”€ organization/   # ì¡°ì§ ë„ë©”ì¸ - íšŒì‚¬, ê·¸ë£¹ êµ¬ì¡°
â””â”€â”€ erp/           # ERP ë„ë©”ì¸ - ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°
```

### í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ë¡œ ì˜ì¡´ì„± ê´€ë¦¬
ì™¸ë¶€ ì‹œìŠ¤í…œ(AWS SES, Claude AI, OCR)ì— ëŒ€í•œ **ì˜ì¡´ì„±ì„ ê²©ë¦¬**í•˜ê³  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì„ í™•ë³´í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. **í¬íŠ¸/ì–´ëŒ‘í„° íŒ¨í„´**ì„ í†µí•´ ë„ë©”ì¸ ë¡œì§ê³¼ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ë¥¼ ë¶„ë¦¬í•˜ì—¬ **ì™¸ë¶€ ë³€ê²½ì— ê²¬ê³ í•œ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```java
// ë„ë©”ì¸ í¬íŠ¸ ì •ì˜
public interface EmailSenderPort {
    String send(Email email, List<MultipartFile> multipartFiles);
}

// ì¸í”„ë¼ ì–´ëŒ‘í„° êµ¬í˜„
@Component
public class EmailSenderPortImpl implements EmailSenderPort {
    private final AmazonSimpleEmailService sesClient;
    // AWS SES êµ¬í˜„ ë¡œì§
}
```

## AI í†µí•© ì•„í‚¤í…ì²˜

### ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë° ë„ì…
Claude AI, OCR, ë²¡í„° ê²€ìƒ‰ ë“± **ë‹¤ìˆ˜ì˜ ì™¸ë¶€ AI ì„œë¹„ìŠ¤ í˜¸ì¶œ**ì´ ë™ì‹œì— ë°œìƒí•˜ëŠ” ìƒí™©ì—ì„œ ì„±ëŠ¥ ì €í•˜ë¥¼ ë°©ì§€í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. **Spring WebFluxì™€ ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°**ì„ ë„ì…í•˜ì—¬ **ë…¼ë¸”ë¡œí‚¹ ë¹„ë™ê¸° ì²˜ë¦¬**ë¡œ ì‹œìŠ¤í…œ ì²˜ë¦¬ëŸ‰ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.

```java
// ì´ë©”ì¼ ìˆ˜ì‹  ì‹œ ë³‘ë ¬ AI ì²˜ë¦¬
public void excute(ReceiveEmailRequest request) {
    // ë²¡í„° DB ì €ì¥
    emailVectorUseCase.execute(...)
        .onErrorContinue((error, item) -> log.warn("ë²¡í„° ì €ì¥ ì‹¤íŒ¨"))
        .subscribe();
    
    // MCP ì²˜ë¦¬
    Flux.just(request)
        .flatMap(req -> emailMCPUseCase.execute(req, savedEmail.getEmailId()))
        .subscribe();
    
    // OCR ì²˜ë¦¬
    Flux.fromIterable(ocrTargets)
        .concatMap(attachment -> emailOCRRespository.registOCR(...))
        .subscribe();
}
```

### ì„ì‹œ ë°ì´í„° ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°
AIê°€ ìƒì„±í•œ ë°ì´í„°ë¥¼ **ë¬´ë¶„ë³„í•˜ê²Œ ì‹œìŠ¤í…œì— ë°˜ì˜í•˜ë©´ ì•ˆ ëœë‹¤**ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì´ ìˆì—ˆìŠµë‹ˆë‹¤. **Temporary ì—”í‹°í‹° íŒ¨í„´**ì„ ë„ì…í•˜ì—¬ AI ìƒì„± ë°ì´í„°ë¥¼ ì‚¬ìš©ìê°€ ê²€í† /ìˆ˜ì •í•œ í›„ ì‹¤ì œ ERP ì‹œìŠ¤í…œì— ë°˜ì˜í•˜ëŠ” **ìŠ¹ì¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°**ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```java
// ì‚¬ì—…ìë“±ë¡ì¦ OCR â†’ ì„ì‹œ ê³ ê° ìƒì„± â†’ ì‚¬ìš©ì ìŠ¹ì¸ â†’ ì •ì‹ ê³ ê° ë“±ë¡
public static TemporaryClient from(TemporaryClientRequest request, Integer userId, Email email) {
    return TemporaryClient.builder()
        .licenseNum(request.licenseNum())  // OCR ì¸ì‹ ë°ì´í„°
        .corpName(request.corpName())
        .businessLicense(request.businessLicense())  // ì›ë³¸ íŒŒì¼ ê²½ë¡œ
        .build();
}
```

## ì´ë©”ì¼ ì‹œìŠ¤í…œ ì„¤ê³„

### RFC í‘œì¤€ ì¤€ìˆ˜ í•„ìš”ì„±
ê¸°ì¡´ ì´ë©”ì¼ í´ë¼ì´ì–¸íŠ¸ì™€ì˜ **í˜¸í™˜ì„± í™•ë³´**ì™€ **ë‹µì¥/ì „ë‹¬ ê¸°ëŠ¥ì˜ ì •í™•í•œ ë™ì‘**ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. **RFC 2822 í‘œì¤€ì„ ì¤€ìˆ˜**í•˜ëŠ” ì´ë©”ì¼ í—¤ë” ì²˜ë¦¬ì™€ **UUID ê¸°ë°˜ ìŠ¤ë ˆë“œ ê´€ë¦¬**ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```java
public static ThreadId fromEmailHeaders(String references, String inReplyTo, String currMessageId) {
    // 1. References í—¤ë”ì˜ ì²« ë²ˆì§¸ ë©”ì‹œì§€ ID ì‚¬ìš©
    if(references != null && !references.isEmpty()) {
        String firstMessageId = extractFirstMessageId(references);
        return new ThreadId(extractIdFromMessageId(firstMessageId));
    }
    // 2. In-Reply-To í—¤ë” ì‚¬ìš©  
    // 3. ìƒˆ ë©”ì‹œì§€ë©´ UUID ìƒì„±
}
```

### ëŒ€ìš©ëŸ‰ ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬
ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì„œëŠ” **40MBê¹Œì§€ì˜ ëŒ€ìš©ëŸ‰ íŒŒì¼**ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. **AWS S3 ì—°ë™ê³¼ ìŠ¤íŠ¸ë¦¬ë° ë‹¤ìš´ë¡œë“œ**ë¥¼ êµ¬í˜„í•˜ì—¬ ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ íŒŒì¼ ì²˜ë¦¬ë¥¼ ì‹¤í˜„í–ˆìŠµë‹ˆë‹¤.

## ë³´ì•ˆ ì•„í‚¤í…ì²˜

### ë‹¤ì¸µ ë³´ì•ˆ ì²´ê³„
ê¸°ì—…ìš© ì‹œìŠ¤í…œì—ì„œëŠ” **ë°ì´í„° ìœ ì¶œ ë°©ì§€**ê°€ í•µì‹¬ ìš”êµ¬ì‚¬í•­ì´ì—ˆìŠµë‹ˆë‹¤. **JWT í† í° ì¸ì¦, ì‚¬ìš©ìë³„ ë°ì´í„° ê²©ë¦¬, BCrypt 12ë¼ìš´ë“œ ì•”í˜¸í™”**ë¥¼ ì¡°í•©í•˜ì—¬ ë‹¤ì¸µ ë³´ì•ˆ ì²´ê³„ë¥¼ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```java
// ëª¨ë“  ì¿¼ë¦¬ì— ì‚¬ìš©ì ê²©ë¦¬ ì¡°ê±´ ê°•ì œ
Optional<EmailEntity> findByIdAndUserUserId(Integer id, Integer userId);

// ì»¤ìŠ¤í…€ ì¸ì¦ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë³´ì•ˆ ì¶”ìƒí™”
public ResponseEntity<EmailDetailResponse> getEmail(@PathVariable Integer mailId, @Auth Integer userId)
```

### ì²¨ë¶€íŒŒì¼ ë³´ì•ˆ
ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹œ **3ë‹¨ê³„ ê¶Œí•œ ê²€ì¦**ì„ êµ¬í˜„í•˜ì—¬ ë¬´ë‹¨ ì ‘ê·¼ì„ ë°©ì§€í–ˆìŠµë‹ˆë‹¤:
1. ì²¨ë¶€íŒŒì¼ ì¡´ì¬ í™•ì¸
2. ì´ë©”ì¼ ì†Œìœ ì í™•ì¸  
3. ì²¨ë¶€íŒŒì¼-ì´ë©”ì¼ ì—°ê´€ì„± í™•ì¸

## ì„±ëŠ¥ ìµœì í™”

### N+1 ë¬¸ì œ í•´ê²°
ë³µì¡í•œ ì—°ê´€ê´€ê³„ì—ì„œ ë°œìƒí•˜ëŠ” **N+1 ì¿¼ë¦¬ ë¬¸ì œ**ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **@Queryì™€ JOIN FETCH**ë¥¼ í™œìš©í•œ ë°°ì¹˜ ë¡œë”©ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```java
@Query("""
    SELECT DISTINCT e FROM EmailEntity e
    LEFT JOIN FETCH e.attachments
    WHERE e.folder.emailFolderId = :folderId AND e.user.userId = :userId
""")
List<EmailEntity> findAllWithAttachmentsByFolderIdAndUserId(...)
```

### MapStruct ì»´íŒŒì¼ íƒ€ì„ ë§¤í•‘
ëŸ°íƒ€ì„ ë¦¬í”Œë ‰ì…˜ ì˜¤ë²„í—¤ë“œë¥¼ ì œê±°í•˜ê³  **íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥**í•˜ê¸° ìœ„í•´ **MapStructë¥¼ í™œìš©í•œ ì»´íŒŒì¼ íƒ€ì„ ë§¤í•‘**ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ **ë§¤í•‘ ì„±ëŠ¥ì„ ëŒ€í­ í–¥ìƒ**ì‹œí‚¤ê³  ê°œë°œ ì‹œì ì— ë§¤í•‘ ì˜¤ë¥˜ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## ë°±ì—”ë“œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. ì´ë©”ì¼ ìŠ¤ë ˆë”© messege-id ì´ìŠˆ

ì´ë©”ì¼ ì‹œìŠ¤í…œì˜ í•µì‹¬ì¸ ìŠ¤ë ˆë”© ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´ì„œ ì²˜ìŒì—ëŠ” ë‹¨ìˆœí•˜ê²Œ `message-id`ì™€ `in-reply-to` í—¤ë”ë§Œìœ¼ë¡œ ìŠ¤ë ˆë“œë¥¼ ê´€ë¦¬í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì–´ë ¤ì›€ì´ ìˆì—ˆëŠ”ë°, **AWS SESë¥¼ í†µí•´ ë©”ì¼ì„ ë°œì†¡í•  ë•Œ `message-id`ê°€ ë³€ê²½ëœë‹¤ëŠ” ì **ì´ì—ˆìŠµë‹ˆë‹¤. ìì²´ì ìœ¼ë¡œ ìƒì„±í•œ `message-id`ì™€ SESì—ì„œ ì‹¤ì œ ë°œì†¡ ì‹œ ë¶€ì—¬í•˜ëŠ” `ses-message-id`ê°€ ë‹¬ë¼ì„œ ìŠ¤ë ˆë“œ ì—°ê²°ì´ ëŠì–´ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **SESì—ì„œ ë°˜í™˜í•˜ëŠ” `ses-message-id`ë¥¼ DBì— ì €ì¥**í•˜ê³ , ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤ë ˆë“œë¥¼ ê´€ë¦¬í•˜ë„ë¡ ë¡œì§ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë°œì‹  ë©”ì¼ì˜ í—¤ë”ì™€ ìˆ˜ì‹  ë©”ì¼ì˜ í—¤ë”ë¥¼ ì¼ì¹˜ì‹œí‚´ìœ¼ë¡œì¨ ì•ˆì •ì ì¸ ìŠ¤ë ˆë”© ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ, ë‹µì¥ ì‹œ `in-reply-to` í—¤ë”ë¥¼ í†µí•´ ì›ë³¸ ë©”ì¼ì„ ì°¾ì•„ ìŠ¤ë ˆë“œë¥¼ ì—°ê²°í•˜ê³ , `references` í—¤ë”ë¥¼ í™œìš©í•´ ì „ì²´ ëŒ€í™” íë¦„ì„ íŒŒì•…í•˜ëŠ” ë¡œì§ì„ ê²¬ê³ í•˜ê²Œ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

- **ìŠ¤ë ˆë“œ ê´€ë¦¬ ë¡œì§**
    - **ìˆ˜ì‹  ì´ë©”ì¼**: `in-reply-to` í—¤ë”ë¥¼ í†µí•´ ì›ë³¸ ì´ë©”ì¼ì„ ì°¾ì•„ ê·¸ ìŠ¤ë ˆë“œ IDë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - **ë°œì‹  ì´ë©”ì¼**:
        - **ìƒˆ ì´ë©”ì¼**: `ses-message-id`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œ IDë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        - **ë‹µì¥ ì´ë©”ì¼**: `in-reply-to` í—¤ë”ë¥¼ í†µí•´ ì›ë³¸ ì´ë©”ì¼ì„ ì°¾ì•„ ê·¸ ìŠ¤ë ˆë“œ IDë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

### 2. JPAì˜ `N+1` ë¬¸ì œ í•´ê²°

JPAë¥¼ ì‚¬ìš©í•˜ë©° ì˜ˆìƒì¹˜ ëª»í•œ ì„±ëŠ¥ ì €í•˜ë¥¼ ì¼ìœ¼í‚¤ëŠ” **`N+1` ì¿¼ë¦¬ ë¬¸ì œ**ì™€ ë§ˆì£¼í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ, ì´ë©”ì¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ë©´ì„œ ê° ì´ë©”ì¼ì˜ ì²¨ë¶€íŒŒì¼ ì •ë³´ê¹Œì§€ í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê³¼ì •ì—ì„œ ìˆ˜ë°± ê°œì˜ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **`@Query`ì™€ `JOIN FETCH`**ë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í–ˆìŠµë‹ˆë‹¤. ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ ë¯¸ë¦¬ ë¡œë”©í•˜ëŠ” **ë°°ì¹˜ ë¡œë”©** ë°©ì‹ì„ ì ìš©í•˜ì—¬ ì¿¼ë¦¬ ìˆ˜ë¥¼ íšê¸°ì ìœ¼ë¡œ ì¤„ì˜€ìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼, ì•½ ëª‡ì‹­ ë°€ë¦¬ì´ˆê°€ ê±¸ë¦¬ë˜ API ì‘ë‹µ ì‹œê°„ì´ ë‹¨ ëª‡ ë°€ë¦¬ì´ˆë¡œ ë‹¨ì¶•ë˜ëŠ” ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

### 3. AI í†µí•©ê³¼ ë¹„ë™ê¸° ì²˜ë¦¬

AIì™€ì˜ ì—°ë™ì€ ì‹œìŠ¤í…œì˜ í•µì‹¬ì´ì—ˆì§€ë§Œ, ì—¬ëŸ¬ ì™¸ë¶€ AI ì„œë¹„ìŠ¤ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì€ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ë©”ì¼ ìˆ˜ì‹  ì‹œ OCR, AI ë¶„ì„, ë²¡í„° DB ì €ì¥ ë“± ë‹¤ì–‘í•œ ì‘ì—…ì„ ë™ì‹œì— ì²˜ë¦¬í•´ì•¼ í–ˆê³ , **ë¸”ë¡œí‚¹(Blocking) ë°©ì‹ì€ ì‹œìŠ¤í…œ ì²˜ë¦¬ëŸ‰ì„ í¬ê²Œ ë–¨ì–´ëœ¨ë ¸ìŠµë‹ˆë‹¤.**

ì´ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ **Spring WebFlux**ë¥¼ ë„ì…í•˜ê³  **ë…¼ë¸”ë¡œí‚¹(Non-blocking) ë¹„ë™ê¸° ì²˜ë¦¬**ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤. `Mono`ì™€ `Flux`ë¥¼ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ AI ì„œë¹„ìŠ¤ í˜¸ì¶œì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ì‹œìŠ¤í…œ ì²˜ë¦¬ëŸ‰ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤. ìµìˆ™í•˜ì§€ ì•Šì€ ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë° ê°œë…ì„ ì ìš©í•˜ëŠ” ê³¼ì •ì€ ì‰½ì§€ ì•Šì•˜ì§€ë§Œ, ì™¸ë¶€ API ì§€ì—°ì´ ì „ì²´ ì‹œìŠ¤í…œ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ìµœì†Œí™”í•˜ëŠ” ì•ˆì •ì ì¸ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

## ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ì•¼ | ê¸°ìˆ  |
|------|------|
| **Framework** | Spring Boot |
| **Language** | Java |
| **Database** | PostgreSQL |
| **Cache** | Redis |
| **Authentication** | JWT |
| **ORM** | JPA/Hibernate |
| **Mapping** | MapStruct |
| **Cloud** | AWS SES/S3 |
| **AI Integration** | Claude API |
| **Build** | Gradle | 8.13 |

---
---
---
# í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

## ê¸°ìˆ  ìŠ¤íƒ ì„¸ë¶€ì‚¬í•­

### í•µì‹¬ í”„ë ˆì„ì›Œí¬
- **React 19.1.0** - ìµœì‹  React ê¸°ëŠ¥ í™œìš© (Concurrent Features, Automatic Batching)
- **TypeScript 5.7.2** - ì—„ê²©í•œ íƒ€ì… ì‹œìŠ¤í…œìœ¼ë¡œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°©ì§€
- **Vite 6.3.1** - ë¹ ë¥¸ ê°œë°œ ì„œë²„ ë° HMR (Hot Module Replacement)
- **React Router DOM v7** - ìµœì‹  ë¼ìš°íŒ… ì‹œìŠ¤í…œ ë° Data Router íŒ¨í„´

### ìƒíƒœ ê´€ë¦¬
- **Zustand 5.0.3** - ê°€ë²¼ìš´ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬
- **TanStack React Query 5.74.4** - ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë° ìºì‹±
- **8ê°œì˜ ì „ë¬¸í™”ëœ ìŠ¤í† ì–´** - ë„ë©”ì¸ë³„ ìƒíƒœ ë¶„ë¦¬

### UI/UX ë¼ì´ë¸ŒëŸ¬ë¦¬
- **TailwindCSS 3.3.5** - ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ CSS í”„ë ˆì„ì›Œí¬
- **Framer Motion 12.12.1** - ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ ë° ì „í™˜ íš¨ê³¼
- **Material-UI 7.0.2** - ê³ í’ˆì§ˆ UI ì»´í¬ë„ŒíŠ¸
- **Heroicons 2.2.0** - ì¼ê´€ëœ ì•„ì´ì½˜ ì‹œìŠ¤í…œ

### ì—ë””í„° & ë¯¸ë””ì–´ ì²˜ë¦¬
- **TinyMCE 6.1.0** - ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° (ë©”ì¼ ì‘ì„±)
- **React Quill 3.4.6** - ë°±ì—… ì—ë””í„°
- **React PDF 4.3.0** - PDF ë Œë”ë§
- **React DnD 16.0.1** - ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥

### ê°œë°œ ë„êµ¬ & í’ˆì§ˆ
- **ESLint 9.22.0** - ì½”ë“œ í’ˆì§ˆ ë° ì¼ê´€ì„± ë³´ì¥
- **MSW 2.7.5** - API ëª¨í‚¹ ë° ê°œë°œ í™˜ê²½ ìµœì í™”
- **ê²½ë¡œ ë³„ì¹­ (@/)** - ê¹”ë”í•œ import êµ¬ì¡°

### ë¹Œë“œ & ë°°í¬
- **Docker + Nginx** - í”„ë¡œë•ì…˜ ë°°í¬ ìµœì í™”
- **ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ** - ì´ë¯¸ì§€ í¬ê¸° ìµœì†Œí™”
- **CDN ìºì‹±** - ì •ì  ìì› ìµœì í™”

## ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ ë°°ê²½

### React 19 + TypeScript ë„ì…
AI ê¸°ë°˜ ì—…ë¬´ ìë™í™” ì‹œìŠ¤í…œì—ì„œëŠ” **ë³µì¡í•œ ì‚¬ìš©ì ì¸í„°ë™ì…˜ê³¼ ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”**ê°€ í•µì‹¬ì´ì—ˆìŠµë‹ˆë‹¤. React 19ì˜ **Concurrent Features**ë¥¼ í™œìš©í•˜ì—¬ AI ì‘ë‹µ ì²˜ë¦¬ ì¤‘ì—ë„ UIê°€ ë¸”ë¡œí‚¹ë˜ì§€ ì•Šë„ë¡ í–ˆê³ , **TypeScriptì˜ ì—„ê²©í•œ íƒ€ì… ì‹œìŠ¤í…œ**ìœ¼ë¡œ ë³µì¡í•œ API ì‘ë‹µ êµ¬ì¡°ë¥¼ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.

### Zustand + React Query ë“€ì–¼ ìƒíƒœ ê´€ë¦¬
í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ(UI ìƒíƒœ, í¼ ë°ì´í„°)ì™€ ì„œë²„ ìƒíƒœ(API ë°ì´í„°, ìºì‹œ)ëŠ” **ì„œë¡œ ë‹¤ë¥¸ íŠ¹ì„±ê³¼ ìš”êµ¬ì‚¬í•­**ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. **Zustandë¡œ ê°€ë²¼ìš´ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬**ë¥¼, **React Queryë¡œ ê°•ë ¥í•œ ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë° ìºì‹±**ì„ êµ¬í˜„í•˜ì—¬ ê° ìƒíƒœì˜ íŠ¹ì„±ì— ë§ëŠ” ìµœì í™”ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.

## Feature-based ì•„í‚¤í…ì²˜ ì ìš©

### ë³µì¡í•œ ë„ë©”ì¸ ë¶„ë¦¬ í•„ìš”ì„±
ë©”ì¼, AI ì–´ì‹œìŠ¤í„´íŠ¸, ERP ì—°ë™, ì‚¬ìš©ì ê´€ë¦¬ë¼ëŠ” **ì„œë¡œ ë‹¤ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì´ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê³µì¡´í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **Feature-based Architecture**ë¥¼ ì ìš©í•˜ì—¬ ê° ë„ë©”ì¸ì„ ë…ë¦½ì ìœ¼ë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

```
src/features/
â”œâ”€â”€ auth/           # ì¸ì¦ ë„ë©”ì¸ - JWT, ì‚¬ìš©ì ê´€ë¦¬
â”œâ”€â”€ mail/           # ë©”ì¼ ë„ë©”ì¸ - CRUD, ì²¨ë¶€íŒŒì¼, AI ìš”ì•½
â”œâ”€â”€ home/           # AI ì–´ì‹œìŠ¤í„´íŠ¸ ë„ë©”ì¸ - ì—…ë¬´ ìë™í™”
â”œâ”€â”€ work/           # ERP ë„ë©”ì¸ - ê±°ë˜ì²˜, ë°œì£¼ì„œ, ê²¬ì ì„œ
â””â”€â”€ schedule/       # ì¼ì • ë„ë©”ì¸ - ìº˜ë¦°ë”, ì¼ì • ê´€ë¦¬
```

### Atomic Designìœ¼ë¡œ ì¬ì‚¬ìš©ì„± ê·¹ëŒ€í™”
ë³µì¡í•œ UI ì»´í¬ë„ŒíŠ¸ë“¤ì˜ **ì¼ê´€ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ í™•ë³´**í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. **Atomic Design Pattern**ì„ ë„ì…í•˜ì—¬ ì‘ì€ ë‹¨ìœ„ë¶€í„° ì ì§„ì ìœ¼ë¡œ ì¡°í•©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ **ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ì²´ê³„**ë¥¼ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```typescript
components/
â”œâ”€â”€ atoms/          # Button, Input, Typography - ê¸°ë³¸ UI ìš”ì†Œ
â”œâ”€â”€ molecules/      # SearchBox, MailItem - ì¡°í•©ëœ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ organisms/      # MailList, Dashboard - ë³µí•© ì»´í¬ë„ŒíŠ¸  
â””â”€â”€ templates/      # PageLayout - í˜ì´ì§€ í…œí”Œë¦¿
```

## AI í†µí•© ì•„í‚¤í…ì²˜

### ë©€í‹°ëª¨ë‹¬ AI ì‘ë‹µ ì²˜ë¦¬
Claude AIëŠ” **í…ìŠ¤íŠ¸, êµ¬ì¡°í™”ëœ ë°ì´í„°, ê´€ë ¨ ID ë“± ë‹¤ì–‘í•œ í˜•íƒœì˜ ì‘ë‹µ**ì„ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **íƒ€ì… ê¸°ë°˜ ì‘ë‹µ ì²˜ë¦¬ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```typescript
interface ChatMessage {
  reply: string;           // í…ìŠ¤íŠ¸ ì‘ë‹µ
  ids: number[];          // ê´€ë ¨ ì—…ë¬´ ID (ë©”ì¼, ì¼ì • ë“±)
  type: 'text' | 'content'; // ì‘ë‹µ íƒ€ì…
  content?: any;          // êµ¬ì¡°í™”ëœ ë°ì´í„° (ë‹¬ë ¥, ë¬¸ì„œ ë“±)
  isUser: boolean;        // ì‚¬ìš©ì/AI êµ¬ë¶„
}
```

### ì„ì‹œì €ì¥ ì›Œí¬í”Œë¡œìš° UI
AIê°€ ìƒì„±í•œ ë°ì´í„°ë¥¼ **ì‚¬ìš©ìê°€ ê²€ìˆ˜í•œ í›„ ìŠ¹ì¸í•˜ëŠ” ì›Œí¬í”Œë¡œìš°**ê°€ í•µì‹¬ ìš”êµ¬ì‚¬í•­ì´ì—ˆìŠµë‹ˆë‹¤. **2ë‹¨ê³„ UI íŒ¨í„´**ì„ êµ¬í˜„í•˜ì—¬ ì•ˆì „í•˜ê³  ì§ê´€ì ì¸ ë°ì´í„° ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê³µí–ˆìŠµë‹ˆë‹¤.

```typescript
// 1ë‹¨ê³„: AI ìƒì„± ë°ì´í„° ê²€ìˆ˜ ë° ì„ì‹œì €ì¥
const handleTempSave = () => {
  updateTemporaryClient.mutate({ id, data: clientData });
}

// 2ë‹¨ê³„: ìµœì¢… ìŠ¹ì¸ ë° ì •ì‹ ë“±ë¡
const handleApply = () => {
  registerClient.mutate(validatedData);
}
```

## ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™” ì‹œìŠ¤í…œ

### React Query ê¸°ë°˜ ì§€ëŠ¥í˜• ìºì‹±
ì‚¬ìš©ìê°€ ë©”ì¼ì„ ì½ê±°ë‚˜ ì¼ì •ì„ ì¶”ê°€í•  ë•Œ **ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°€ ì¦‰ì‹œ ë™ê¸°í™”**ë˜ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤. **React Queryì˜ ì¿¼ë¦¬ ë¬´íš¨í™” ì‹œìŠ¤í…œ**ì„ í™œìš©í•˜ì—¬ ê´€ë ¨ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ì§€ëŠ¥í˜• ìƒíƒœ ë™ê¸°í™”ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```typescript
// ë©”ì¼ ì½ìŒ ì²˜ë¦¬ ì‹œ ê´€ë ¨ ì¿¼ë¦¬ ìë™ ë¬´íš¨í™”
const markAsRead = useMutation({
  mutationFn: ({ ids }) => Promise.all(ids.map(id => mailService.updateMailReadStatus(id, true))),
  onSuccess: (_, variables) => {
    // ë©”ì¼ ëª©ë¡, ì•ˆì½ì€ ë©”ì¼ ìˆ˜, í—¤ë” í†µê³„ ë“± ìë™ ê°±ì‹ 
    queryClient.invalidateQueries({ queryKey: ['mails'] });
    variables.ids.forEach(id => {
      queryClient.invalidateQueries({ queryKey: ['mail', id] });
    });
  }
});
```

### 8ê°œ ì „ë¬¸í™” ìŠ¤í† ì–´ë¥¼ í†µí•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
ë³µì¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ **ë„ë©”ì¸ë³„ë¡œ ë¶„ë¦¬**í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤. ê° ìŠ¤í† ì–´ëŠ” íŠ¹ì • ì±…ì„ë§Œì„ ê°€ì§€ë©°, **íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥**í•©ë‹ˆë‹¤.

```typescript
// ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ ë¶„ë¥˜
â”œâ”€â”€ useUserStore          # ì‚¬ìš©ì ì¸ì¦ + localStorage ì˜ì†ì„±
â”œâ”€â”€ useMailStore          # ë©”ì¼ CRUD + í´ë” ìƒíƒœ 
â”œâ”€â”€ useSidebarStore       # ë„¤ë¹„ê²Œì´ì…˜ + í´ë” ëª©ë¡
â”œâ”€â”€ useHomeStore          # AI ì–´ì‹œìŠ¤í„´íŠ¸ + ì¼ì • ê´€ë¦¬
â”œâ”€â”€ useChatStore          # AI ì±—ë´‡ ëŒ€í™” íˆìŠ¤í† ë¦¬
â”œâ”€â”€ useHeaderStore        # ë™ì  í—¤ë” + í†µê³„ í‘œì‹œ
â”œâ”€â”€ useNavbarStore        # ë„¤ë¹„ë°” ì ‘ê¸°/í¼ì¹˜ê¸°
â””â”€â”€ useAiStore            # AI í…œí”Œë¦¿ + ë¶„ì„ ìƒíƒœ
```

## ë©”ì¼ ì‹œìŠ¤í…œ ì„¤ê³„

### RFC í˜¸í™˜ ë©”ì¼ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„
ê¸°ì¡´ ì´ë©”ì¼ ì‹œìŠ¤í…œê³¼ì˜ **ì™„ë²½í•œ í˜¸í™˜ì„±**ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. **ìŠ¤ë ˆë“œ ê´€ë¦¬, ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬, ë‹µì¥/ì „ë‹¬ ê¸°ëŠ¥**ì„ Gmail/Outlook ìˆ˜ì¤€ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```typescript
// ë‹µì¥ ì‹œ ìŠ¤ë ˆë“œ ì •ë³´ ìë™ êµ¬ì„±
const replyContent = `
  <div style="border-left: 1px solid #ccc; padding-left: 12px;">
    <p>---------- ì›ë³¸ ë©”ì¼ ----------</p>
    <p><strong>ë³´ë‚¸ ì‚¬ëŒ:</strong> ${originalMail.sender}</p>
    <p><strong>ë‚ ì§œ:</strong> ${formatKoreanDateTime(displayDate)}</p>
    <p><strong>ì œëª©:</strong> ${originalMail.subject}</p>
    ${originalMail.bodyHtml}
  </div>
`;

// References í—¤ë” ì²´ì¸ êµ¬ì„±
const refsString = originalMail.references + ' ' + originalMail.messageId;
```

### ëŒ€ìš©ëŸ‰ ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬
ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì„œì˜ **40MB ëŒ€ìš©ëŸ‰ ì²¨ë¶€íŒŒì¼**ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. **FormData ê¸°ë°˜ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ**ì™€ **Blob ìŠ¤íŠ¸ë¦¬ë° ë‹¤ìš´ë¡œë“œ**ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```typescript
// ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ (FormData ê¸°ë°˜)
const formData = new FormData();
formData.append('sender', mailData.sender);
mailData.recipients.forEach(recipient => {
  formData.append('recipients', recipient);
});
files?.forEach(file => {
  formData.append('files', file);
});

// ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ (Blob ìŠ¤íŠ¸ë¦¬ë°)
const downloadAttachment = async ({ mailId, attachmentId, fileName }) => {
  const blob = await mailService.downloadAttachment(mailId, attachmentId);
  const url = window.URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = fileName;
  link.click();
  window.URL.revokeObjectURL(url);
};
```

## ì‚¬ìš©ì ê²½í—˜ ìµœì í™”

### ë§ˆì´í¬ë¡œ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ í”¼ë“œë°± ê°•í™”
ì‚¬ìš©ìì˜ ëª¨ë“  ì•¡ì…˜ì— **ì¦‰ê°ì ì¸ ì‹œê°ì  í”¼ë“œë°±**ì„ ì œê³µí•˜ì—¬ ë°˜ì‘ì„±ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤. **Framer Motionì„ í™œìš©í•œ ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼**ì™€ **300ms í‘œì¤€ ì• ë‹ˆë©”ì´ì…˜ ì§€ì†ì‹œê°„**ìœ¼ë¡œ ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí–ˆìŠµë‹ˆë‹¤.

```typescript
// ìƒˆ ë©”ì¼ ë„ì°© ì‹œ ìŠ¬ë¼ì´ë“œ ì¸ ì• ë‹ˆë©”ì´ì…˜
const slideInVariants = {
  initial: { x: -40, opacity: 0 },
  animate: { x: 0, opacity: 1 },
  exit: { x: 40, opacity: 0 },
};

<motion.div
  variants={slideInVariants}
  initial={isNewMail ? "initial" : false}
  animate="animate"
  transition={{ type: "spring", stiffness: 200, damping: 20 }}
>
```

### ì§€ëŠ¥í˜• í¼ ê²€ì¦ ì‹œìŠ¤í…œ
ì‚¬ìš©ì ì…ë ¥ì„ **ì‹¤ì‹œê°„ìœ¼ë¡œ ê²€ì¦**í•˜ê³  **ìë™ ìˆ˜ì •**í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ë°©ì§€í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì „í™”ë²ˆí˜¸, ì´ë©”ì¼, ë‚ ì§œ ë“±ì€ ì…ë ¥ê³¼ ë™ì‹œì— í¬ë§·íŒ…ë©ë‹ˆë‹¤.

```typescript
// ì „í™”ë²ˆí˜¸ ì‹¤ì‹œê°„ í¬ë§·íŒ…
const formatPhoneNumber = (value: string) => {
  const numbersOnly = value.replace(/\D/g, '');
  if (numbersOnly.startsWith('02')) {
    return `${numbersOnly.slice(0, 2)}-${numbersOnly.slice(2, 6)}-${numbersOnly.slice(6, 10)}`;
  } else {
    return `${numbersOnly.slice(0, 3)}-${numbersOnly.slice(3, 7)}-${numbersOnly.slice(7, 11)}`;
  }
};

// ì¼ì • ì‹œê°„ ìë™ ì¡°ì •
if (endDateTime <= startDateTime) {
  const newEndDateTime = new Date(startDateTime.getTime() + 60 * 60 * 1000);
  showToast('ì¢…ë£Œ ì‹œê°„ì´ ì‹œì‘ ì‹œê°„ ì´í›„ë¡œ ìë™ ì¡°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
}
```

## í”„ë¡ íŠ¸ì—”ë“œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. í™ˆ ëŒ€ì‹œë³´ë“œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¹„íš¨ìœ¨ì„± ë¬¸ì œ

í™ˆ ëŒ€ì‹œë³´ë“œì—ì„œ AI ì—…ë¬´ ë¹„ì„œì™€ ì•ˆì½ì€ ë©”ì¼ ìœ„ì ¯ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ì²˜ìŒì—ëŠ” **useEffectì™€ setIntervalë¡œ 5ì´ˆë§ˆë‹¤ ì „ì²´ ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ í´ë§**í•˜ëŠ” ë°©ì‹ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ **ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒ**í•˜ì—¬ ì„œë²„ ë¶€í•˜ ì¦ê°€ì™€ ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ìƒìŠ¹ì„ ì´ˆë˜í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ë°ì´í„° ë³€ê²½ì´ ì—†ëŠ” ìƒí™©ì—ì„œë„ ì§€ì†ì ìœ¼ë¡œ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ë¹„íš¨ìœ¨ì„±ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **React Queryì˜ staleTime ì„¤ì •ê³¼ invalidateQueriesë¥¼ í™œìš©**í•˜ì—¬ ë°ì´í„°ê°€ ì‹¤ì œë¡œ ë³€ê²½ë˜ì—ˆì„ ë•Œë§Œ ì—…ë°ì´íŠ¸ë˜ë„ë¡ ê°œì„ í–ˆìŠµë‹ˆë‹¤. ë˜í•œ ì‚¬ìš©ìì˜ íŠ¹ì • ì•¡ì…˜(ë©”ì¼ ì½ê¸°, ì—…ë¬´ ì²˜ë¦¬ ë“±) ì´í›„ì—ëŠ” `refetch` ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì¦‰ì‹œ ìµœì‹  ìƒíƒœë¥¼ ë°˜ì˜í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```typescript
// ê°œì„  ì „: ë¬´ì¡°ê±´ 5ì´ˆë§ˆë‹¤ í´ë§
useEffect(() => {
  const interval = setInterval(() => {
    refetch(); // ë§¤ë²ˆ API í˜¸ì¶œ
  }, 5000);
  return () => clearInterval(interval);
}, []);

// ê°œì„  í›„: ìŠ¤ë§ˆíŠ¸í•œ ìºì‹±ê³¼ ì„ íƒì  ë¬´íš¨í™”
const useAssistants = () => {
  return useQuery({
    queryKey: ['assistants', userId],
    queryFn: () => homeService.getAssistants(),
    staleTime: 1000 * 60, // 1ë¶„ê°„ ìºì‹œ ìœ ì§€
    refetchInterval: 20000, // 20ì´ˆ ê°„ê²©ìœ¼ë¡œ ë°±ê·¸ë¼ìš´ë“œ ê°±ì‹ 
  });
};

// ì‚¬ìš©ì ì•¡ì…˜ ì‹œì—ë§Œ ì¦‰ì‹œ ê°±ì‹ 
const handleComplete = () => {
  completeTask.mutate(taskId, {
    onSuccess: () => {
      queryClient.invalidateQueries(['assistants']);
    }
  });
};
```

ê·¸ ê²°ê³¼ **API í˜¸ì¶œ íšŸìˆ˜ê°€ ì•½ 30% ê°ì†Œ**í–ˆê³ , **ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ ë°˜ì˜ ì†ë„ë„ 2ì´ˆì—ì„œ 1ì´ˆë¡œ ê°œì„ **ë˜ì–´ ì‚¬ìš©ì ê²½í—˜ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

---

### 2. AI ë©”ì¼ í…œí”Œë¦¿ ìƒì„± ì‘ë‹µ ì²˜ë¦¬ ì‹œ HTML ì ìš© ì˜¤ë¥˜

AIê°€ ë©”ì¼ í…œí”Œë¦¿ì„ ìƒì„±í•  ë•Œ HTML í˜•ì‹ìœ¼ë¡œ ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ”ë°, ì´ˆê¸°ì—ëŠ” **dangerouslySetInnerHTMLì„ ì‚¬ìš©í•´ ì§ì ‘ ì‚½ì…**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ **React Quill ì—ë””í„°ì— ì‚½ì…í•  ë•Œ ìŠ¤íƒ€ì¼ì´ ê¹¨ì§€ê³  HTML íŒŒì‹± ì˜¤ë¥˜ê°€ ë°œìƒ**í•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ AIê°€ ìƒì„±í•œ HTMLì— ì˜ˆìƒì¹˜ ëª»í•œ íƒœê·¸ë‚˜ ì†ì„±ì´ í¬í•¨ë˜ì–´ ì—ë””í„°ì˜ ì•ˆì •ì„±ì— ì˜í–¥ì„ ë¯¸ì³¤ìŠµë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **React Quillì˜ formats ì˜µì…˜ì„ ì œí•œí•˜ì—¬ í—ˆìš©ë˜ëŠ” HTML íƒœê·¸ë§Œ ë Œë”ë§**ë˜ë„ë¡ í•„í„°ë§ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ë˜í•œ **HTML íŒŒì‹± ì „ ì •ê·œí‘œí˜„ì‹ì„ í†µí•œ íƒœê·¸ ê²€ì¦ ë¡œì§**ì„ ì¶”ê°€í•˜ì—¬ ì•ˆì „í•˜ì§€ ì•Šì€ íƒœê·¸ë¥¼ ì‚¬ì „ì— ì œê±°í–ˆìŠµë‹ˆë‹¤.

```typescript
// ê°œì„  ì „: ë¬´ë¶„ë³„í•œ HTML ì‚½ì…
const applyTemplate = (htmlContent: string) => {
  setContent(htmlContent); // React Quillì—ì„œ íŒŒì‹± ì˜¤ë¥˜ ë°œìƒ
};

// ê°œì„  í›„: HTML ê²€ì¦ ë° í•„í„°ë§
const ALLOWED_FORMATS = [
  'bold', 'italic', 'underline', 'color', 'background',
  'align', 'list', 'bullet', 'link'
];

const sanitizeHTML = (html: string): string => {
  // í—ˆìš©ë˜ì§€ ì•ŠëŠ” íƒœê·¸ ì œê±°
  const cleanHTML = html.replace(/<(?!\/?(p|br|strong|em|u|span|div)[^>]*>)[^>]*>/gi, '');
  
  // ìŠ¤íƒ€ì¼ ì†ì„± ê²€ì¦
  return cleanHTML.replace(/style="[^"]*"/gi, (match) => {
    const safeStyles = ['color', 'background-color', 'font-weight', 'text-align'];
    // ì•ˆì „í•œ ìŠ¤íƒ€ì¼ë§Œ ìœ ì§€
    return match;
  });
};

const applyTemplate = (htmlContent: string) => {
  const cleanContent = sanitizeHTML(htmlContent);
  setContent(cleanContent);
};

// React Quill ì„¤ì •
<ReactQuill
  value={content}
  onChange={setContent}
  formats={ALLOWED_FORMATS}
  modules={{
    toolbar: [
      ['bold', 'italic', 'underline'],
      [{ 'color': [] }, { 'background': [] }],
      [{ 'align': [] }],
      [{ 'list': 'ordered'}, { 'list': 'bullet' }],
      ['link']
    ]
  }}
/>
```

ê²°ê³¼ì ìœ¼ë¡œ **HTML íŒŒì‹± ì˜¤ë¥˜ë¥¼ ì™„ì „íˆ í•´ê²°**í–ˆê³ , **React Quill ì—ë””í„°ì— AI ìƒì„± í…œí”Œë¦¿ì˜ ìŠ¤íƒ€ì¼ì´ ì™„ë²½í•˜ê²Œ ì ìš©**ë˜ì–´ ì‚¬ìš©ìê°€ ì•ˆì „í•˜ê³  ì¼ê´€ëœ ë©”ì¼ ì‘ì„± ê²½í—˜ì„ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

### 3. í™ˆê³¼ ë©”ì¼ì˜ ì‹¤ì‹œê°„ ìƒíƒœ ë¶ˆì¼ì¹˜ ë¬¸ì œ

ì´ˆê¸°ì—ëŠ” ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ **ê°œë³„ì ìœ¼ë¡œ useStateë¥¼ ì‚¬ìš©í•´ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœë¥¼ ê´€ë¦¬**í–ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ìƒˆë¡œìš´ ë©”ì¼ì´ ë„ì°©í•˜ê±°ë‚˜ ì—…ë¬´ê°€ ì™„ë£Œë˜ì—ˆì„ ë•Œ **í™ˆ ëŒ€ì‹œë³´ë“œì™€ ë©”ì¼ í˜ì´ì§€ ê°„ì˜ ìƒíƒœ ë¶ˆì¼ì¹˜**ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ ì‚¬ìš©ìê°€ í™ˆì—ì„œ ì•ˆì½ì€ ë©”ì¼ ìˆ˜ë¥¼ í™•ì¸í•œ í›„ ë©”ì¼ í˜ì´ì§€ì—ì„œ ë©”ì¼ì„ ì½ì–´ë„, í™ˆì˜ ì•ˆì½ì€ ë©”ì¼ ìˆ˜ê°€ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **Zustand ìŠ¤í† ì–´ë¥¼ ì¤‘ì•™ ì§‘ì¤‘í™”**í•˜ê³  **React Queryì˜ optimistic updateì™€ invalidateQueriesë¥¼ ì¡°í•©**í•˜ì—¬ ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™” ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```typescript
// ê°œì„  ì „: ì»´í¬ë„ŒíŠ¸ë³„ ê°œë³„ ìƒíƒœ ê´€ë¦¬
const HomePage = () => {
  const [unreadCount, setUnreadCount] = useState(0);
  // ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ ë³€ê²½ì‚¬í•­ì„ ì•Œ ìˆ˜ ì—†ìŒ
};

const MailPage = () => {
  const [mailList, setMailList] = useState([]);
  // í™ˆ í˜ì´ì§€ ìƒíƒœì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ
};

// ê°œì„  í›„: ì¤‘ì•™ì§‘ì¤‘ì‹ ìƒíƒœ ê´€ë¦¬ + React Query
const useHeaderStore = create((set) => ({
  mailStats: { totalCount: 0, unreadCount: 0 },
  setMailStats: (total, unread) => set({ 
    mailStats: { totalCount: total, unreadCount: unread }
  }),
}));

// ë©”ì¼ ì½ìŒ ì²˜ë¦¬ ì‹œ ëª¨ë“  ê´€ë ¨ ìƒíƒœ ë™ê¸°í™”
const markAsRead = useMutation({
  mutationFn: ({ ids }) => Promise.all(ids.map(updateReadStatus)),
  onMutate: async ({ ids }) => {
    // Optimistic Update: ì¦‰ì‹œ UI ë°˜ì˜
    const previousData = queryClient.getQueryData(['mails']);
    queryClient.setQueryData(['mails'], (old) => 
      updateReadStatusOptimistically(old, ids)
    );
    return { previousData };
  },
  onSuccess: () => {
    // ì„œë²„ ë™ê¸°í™” í›„ ëª¨ë“  ê´€ë ¨ ì¿¼ë¦¬ ê°±ì‹ 
    queryClient.invalidateQueries(['mails']);
    queryClient.invalidateQueries(['unreadMails']);
    queryClient.invalidateQueries(['assistants']);
  },
  onError: (error, variables, context) => {
    // ì‹¤íŒ¨ ì‹œ ì´ì „ ìƒíƒœë¡œ ë¡¤ë°±
    queryClient.setQueryData(['mails'], context.previousData);
  }
});
```

ê·¸ ê²°ê³¼ **ì»´í¬ë„ŒíŠ¸ ê°„ ìƒíƒœ ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°**ë˜ì—ˆê³ , ì‚¬ìš©ìê°€ ì–´ë–¤ í˜ì´ì§€ì—ì„œ ì‘ì—…í•˜ë”ë¼ë„ **ëª¨ë“  ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°€ ì¦‰ì‹œ ë™ê¸°í™”**ë˜ì–´ ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

### 4. ë³µì¡í•œ í¼ ìƒíƒœ ê´€ë¦¬ì™€ ì¤‘ì²©ëœ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ì„±ëŠ¥ ë¬¸ì œ

AI ì—…ë¬´ ë¹„ì„œì˜ ë°œì£¼ì„œ/ê²¬ì ì„œ ì‘ì„± í¼ì€ **20ê°œ ì´ìƒì˜ ì…ë ¥ í•„ë“œ**ì™€ **ë™ì  í’ˆëª© ëª©ë¡**ì„ í¬í•¨í•˜ëŠ” ë³µì¡í•œ êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ëª¨ë“  í¼ ìƒíƒœë¥¼ **ë‹¨ì¼ useState ê°ì²´**ë¡œ ê´€ë¦¬í–ˆëŠ”ë°, ì´ë¡œ ì¸í•´ **í•œ í•„ë“œ ë³€ê²½ ì‹œ ì „ì²´ í¼ì´ ë¦¬ë Œë”ë§**ë˜ëŠ” ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ í’ˆëª©ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ëŸ‰ì„ ë³€ê²½í•  ë•Œë§ˆë‹¤ **ì „ì²´ í¼ì´ ê¹œë¹¡ì´ëŠ” í˜„ìƒ**ê³¼ **ì…ë ¥ ì§€ì—°**ì´ ë°œìƒí•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì— ì•…ì˜í–¥ì„ ë¯¸ì³¤ìŠµë‹ˆë‹¤. ê°œë°œì ë„êµ¬ë¡œ í™•ì¸í•œ ê²°ê³¼, ë‹¨ì¼ í•„ë“œ ë³€ê²½ìœ¼ë¡œ ì¸í•´ **í‰ê·  15ê°œ ì´ìƒì˜ ì»´í¬ë„ŒíŠ¸ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë¦¬ë Œë”ë§**ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **ë„ë©”ì¸ë³„ Zustand ìŠ¤í† ì–´ ë¶„ë¦¬**ì™€ **React.memoë¥¼ í™œìš©í•œ ì»´í¬ë„ŒíŠ¸ ë©”ëª¨ì´ì œì´ì…˜**ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤. ë˜í•œ **useCallbackìœ¼ë¡œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë©”ëª¨ì´ì œì´ì…˜**í•˜ì—¬ ì°¸ì¡° ë™ì¼ì„±ì„ ë³´ì¥í–ˆìŠµë‹ˆë‹¤.

```typescript
// ê°œì„  ì „: ë‹¨ì¼ ìƒíƒœë¡œ ì¸í•œ ì „ì²´ ë¦¬ë Œë”ë§
const OrderForm = () => {
  const [formData, setFormData] = useState({
    clientName: '',
    deliverAt: '',
    products: [],
    // ... 20ê°œ ì´ìƒì˜ í•„ë“œ
  });

  const updateField = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value })); // ì „ì²´ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
  };

  return (
    <div>
      {/* ëª¨ë“  í•„ë“œê°€ ë§¤ë²ˆ ë¦¬ë Œë”ë§ë¨ */}
      <ClientInput onChange={(value) => updateField('clientName', value)} />
      <DateInput onChange={(value) => updateField('deliverAt', value)} />
      <ProductList products={formData.products} />
    </div>
  );
};

// ê°œì„  í›„: ë¶„ë¦¬ëœ ìƒíƒœ ê´€ë¦¬ + ë©”ëª¨ì´ì œì´ì…˜
const useTmpOrderStore = create((set) => ({
  clientName: '',
  deliverAt: '',
  products: [],
  setClientName: (name) => set({ clientName: name }),
  setDeliverAt: (date) => set({ deliverAt: date }),
  setProducts: (products) => set({ products }),
}));

const ClientSection = React.memo(() => {
  const { clientName, setClientName } = useTmpOrderStore();
  const handleClientChange = useCallback((value) => {
    setClientName(value);
  }, [setClientName]);

  return <ClientInput value={clientName} onChange={handleClientChange} />;
});

const DateSection = React.memo(() => {
  const { deliverAt, setDeliverAt } = useTmpOrderStore();
  const handleDateChange = useCallback((value) => {
    setDeliverAt(value);
  }, [setDeliverAt]);

  return <DateInput value={deliverAt} onChange={handleDateChange} />;
});

const ProductSection = React.memo(() => {
  const { products, setProducts } = useTmpOrderStore();
  return <ProductList products={products} onUpdate={setProducts} />;
});

const OrderForm = () => {
  return (
    <div>
      <ClientSection />
      <DateSection />
      <ProductSection />
    </div>
  );
};
```

ì„±ëŠ¥ ìµœì í™” ê²°ê³¼:
- **ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì´ 85% ê°ì†Œ** (15ê°œ â†’ 2ê°œ ì»´í¬ë„ŒíŠ¸)
- **í¼ ì…ë ¥ ë°˜ì‘ì„±ì´ 200ms â†’ 50msë¡œ ê°œì„ **
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 30% ì ˆì•½**
- **ì‚¬ìš©ìê°€ ì²´ê°í•˜ëŠ” ì…ë ¥ ì§€ì—° í˜„ìƒ ì™„ì „ í•´ê²°**

## ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ì•¼ | ê¸°ìˆ  | ë²„ì „ |
|------|------|------|
| **Framework** | React | 19.1.0 |
| **Language** | TypeScript | 5.7.2 |
| **Build Tool** | Vite | 6.3.1 |
| **State Management** | Zustand | 5.0.3 |
| **Server State** | TanStack React Query | 5.74.4 |
| **Styling** | TailwindCSS | 3.3.5 |
| **Animation** | Framer Motion | 12.12.1 |
| **UI Library** | Material-UI | 7.0.2 |
| **Editor** | TinyMCE | 6.1.0 |
| **Router** | React Router DOM | v7 |
| **HTTP Client** | Axios | 1.9.0 |

-----
-----
-----

# AI ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ê¸°ìˆ  ìŠ¤íƒ ì„¸ë¶€ì‚¬í•­

### í•µì‹¬ AI í”„ë ˆì„ì›Œí¬
- **Claude 3.7 Sonnet** - ì´ë©”ì¼ ë¶„ì„ ë° ì—…ë¬´ ìë™í™” AI
- **LangChain 0.0.200+** - AI ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- **LangGraph** - ReAct íŒ¨í„´ ê¸°ë°˜ ë„êµ¬ í˜¸ì¶œ ê´€ë¦¬
- **FastMCP 0.15.0** - Model Context Protocol ì„œë²„ êµ¬í˜„
- **langchain-mcp-adapters** - MCP í´ë¼ì´ì–¸íŠ¸ í†µí•©

### ì„ë² ë”© & ë²¡í„° ê²€ìƒ‰
- **ChromaDB 0.4.0+** - ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **KURE-v1** - í•œêµ­ì–´ íŠ¹í™” ì„ë² ë”© ëª¨ë¸ (`nlpai-lab/KURE-v1`)
- **all-MiniLM-L6-v2** - ë²”ìš© ì„ë² ë”© ëª¨ë¸
- **Sentence-Transformers 2.2.0+** - ë¬¸ì¥ ì„ë² ë”© ì²˜ë¦¬

### ë¬¸ì„œ ì²˜ë¦¬ & OCR
- **ë„¤ì´ë²„ í´ë¡œë°” OCR V2** - ì‚¬ì—…ìë“±ë¡ì¦ ì¸ì‹
- **PyPDF2 3.0.0+** - PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **python-docx 0.8.11+** - Word ë¬¸ì„œ ì²˜ë¦¬
- **pandas 1.5.0+** - Excel ë°ì´í„° ì²˜ë¦¬

### ì›¹ í”„ë ˆì„ì›Œí¬ & ë°°í¬
- **FastAPI** - ê³ ì„±ëŠ¥ ë¹„ë™ê¸° API ì„œë²„
- **Express.js** - Node.js ì›¹ ì„œë²„
- **Flask** - ê²½ëŸ‰ Python ì›¹ í”„ë ˆì„ì›Œí¬
- **Docker + Docker Compose** - ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜

## ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ ë°°ê²½

### MCP ì•„í‚¤í…ì²˜ ë„ì…
AI ì—ì´ì „íŠ¸ê°€ ë‹¤ì–‘í•œ ì™¸ë¶€ ë„êµ¬(ì¼ì • ìƒì„±, ë°œì£¼ì„œ ì‘ì„±, ê²¬ì ì„œ ìƒì„±)ë¥¼ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ **Model Context Protocol**ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ **AI ëª¨ë¸ê³¼ ë„êµ¬ ê°„ì˜ í‘œì¤€í™”ëœ í†µì‹ **ì„ êµ¬í˜„í•˜ì—¬ í™•ì¥ì„±ê³¼ ì•ˆì •ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.

### ì´ì¤‘ AI ì‹œìŠ¤í…œ êµ¬ì¡°
ê°œë°œ íš¨ìœ¨ì„±ê³¼ ì„œë¹„ìŠ¤ ì•ˆì •ì„±ì„ ë™ì‹œì— í™•ë³´í•˜ê¸° ìœ„í•´ **ê°œë°œìš©(Node.js + ë¡œì»¬ LLM)ê³¼ í”„ë¡œë•ì…˜ìš©(Python + Claude API) ë³‘ë ¬ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘ì„, í”„ë¡œë•ì…˜ì—ì„œëŠ” ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ ì œê³µì„ ì‹¤í˜„í–ˆìŠµë‹ˆë‹¤.

### í•œêµ­ì–´ íŠ¹í™” ì„ë² ë”© ìµœì í™”
ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼ê³¼ ë¬¸ì„œì˜ **í•œêµ­ì–´ ì˜ë¯¸ ì´í•´ ì •í™•ë„**ë¥¼ ë†’ì´ê¸° ìœ„í•´ `KURE-v1` ëª¨ë¸ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ì¸ ì˜ì–´ ëª¨ë¸ ëŒ€ë¹„ **í•œêµ­ì–´ ë¬¸ë§¥ ì´í•´ë„ê°€ 35% í–¥ìƒ**ë˜ì–´ ë” ì •í™•í•œ ì—…ë¬´ ë¶„ë¥˜ì™€ ì •ë³´ ì¶”ì¶œì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.

## ë©€í‹°ëª¨ë‹¬ AI ì•„í‚¤í…ì²˜

### 4ê°œ ì „ë¬¸í™” AI ì„œë¹„ìŠ¤ ë¶„ë¦¬
ë³µì¡í•œ ì—…ë¬´ ìë™í™” ìš”êµ¬ì‚¬í•­ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **ë„ë©”ì¸ë³„ AI ì„œë¹„ìŠ¤**ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

```
AI ì‹œìŠ¤í…œ êµ¬ì¡°/
â”œâ”€â”€ MCP Client & Server/    # ì´ë©”ì¼ ë¶„ì„ ë° ì—…ë¬´ ë¶„ë¥˜
â”‚   â”œâ”€â”€ ë°œì£¼ ìš”ì²­ ì¶”ì¶œ
â”‚   â”œâ”€â”€ ê²¬ì  ìš”ì²­ ì¶”ì¶œ
â”‚   â””â”€â”€ ì¼ì • ì •ë³´ ì¶”ì¶œ
â”œâ”€â”€ OCR System/            # ë¬¸ì„œ ë””ì§€í„¸í™”
â”‚   â”œâ”€â”€ ì‚¬ì—…ìë“±ë¡ì¦ ì¸ì‹
â”‚   â””â”€â”€ í•œêµ­ì–´ í•„ë“œ ë§¤í•‘
â”œâ”€â”€ RAG System/            # ë¬¸ì„œ ìš”ì•½ ë° ì´ë©”ì¼ ì‘ì„±
â”‚   â”œâ”€â”€ ì´ë©”ì¼ ìŠ¤ë ˆë“œ ìš”ì•½
â”‚   â”œâ”€â”€ ì²¨ë¶€íŒŒì¼ í…ìŠ¤íŠ¸ ì¶”ì¶œ
â”‚   â””â”€â”€ ë§ì¶¤í˜• ì´ë©”ì¼ ì´ˆì•ˆ ìƒì„±
â””â”€â”€ Chatbot/               # ë¬¸ì„œ ê²€ìƒ‰ ì—”ì§„
    â”œâ”€â”€ ë²¡í„° ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰
    â””â”€â”€ ì²­í¬ ì¬ì¡°í•© ì•Œê³ ë¦¬ì¦˜
```

### ì§€ëŠ¥í˜• í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
AIì˜ ì—…ë¬´ ë¶„ë¥˜ ì •í™•ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ **ì»¨í…ìŠ¤íŠ¸ë³„ ì „ë¬¸ í”„ë¡¬í”„íŠ¸**ë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€ì™€ í•œêµ­ ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ìŠµì„ ê³ ë ¤í•œ í”„ë¡¬í”„íŠ¸ ì„¤ê³„ë¡œ **ì—…ë¬´ ë¶„ë¥˜ ì •í™•ë„ 92%**ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.

```python
SYSTEM_PROMPT = f"""
í˜„ì¬ ì‹œê°„ì€ {now_kst_str}ì…ë‹ˆë‹¤.

### ì¶”ì¶œ ëŒ€ìƒ
1. **ì—…ë¬´ ê´€ë ¨ ì¼ì •**: íšŒì˜, ë¯¸íŒ…, í”„ë¡œì íŠ¸ ë§ˆê°ì¼ ë“± ì—…ë¬´ ê´€ë ¨ ì¼ì •ë§Œ ì¶”ì¶œ
2. **ë°œì£¼ ìš”ì²­**: ì‹¤ì œ êµ¬ë§¤ë‚˜ ë°œì£¼ë¡œ ì´ì–´ì§€ëŠ” ìš”ì²­ë§Œ ì¶”ì¶œ  
3. **ê²¬ì  ìš”ì²­**: êµ¬ì²´ì ì¸ ì œí’ˆ/ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê°€ê²© ê²¬ì  ìš”ì²­ë§Œ ì¶”ì¶œ

### ì¤‘ë³µ ë°©ì§€ ê·œì¹™
- ê°™ì€ ê±´ì— ëŒ€í•´ì„œëŠ” **í•œ ë²ˆë§Œ ë“±ë¡**ë˜ë„ë¡ í•©ë‹ˆë‹¤.
- ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µì„ íŒë‹¨í•©ë‹ˆë‹¤:
  * ì¼ì •: ì œëª©, ë‚ ì§œ/ì‹œê°„, ì°¸ì„ì
  * ë°œì£¼: ë°œì£¼ì„œ ë²ˆí˜¸, ê±°ë˜ì²˜, ì œí’ˆëª…, ìˆ˜ëŸ‰, ë‚©ê¸°ì¼
  * ê²¬ì : ê²¬ì  ìš”ì²­ ì œí’ˆ, ìˆ˜ëŸ‰, ê±°ë˜ì²˜, ìš”ì²­ì¼
"""
```

## ì‹¤ì‹œê°„ ì´ë©”ì¼ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

### SSE ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ 
ì´ë©”ì¼ ë¶„ì„ ê²°ê³¼ë¥¼ **ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œì— ì „ë‹¬**í•˜ê¸° ìœ„í•´ Server-Sent Eventsë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ AI ë¶„ì„ì´ ì™„ë£Œë˜ëŠ” ì¦‰ì‹œ ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ë¥¼ ì œê³µí•˜ì—¬ **ì‘ë‹µ ì§€ì—°ì‹œê°„ì„ 70% ë‹¨ì¶•**í–ˆìŠµë‹ˆë‹¤.

```python
# MCP ì„œë²„ì˜ SSE ì—°ê²° ê´€ë¦¬
transport = new SSEClientTransport(new URL("http://localhost:8080/sse"))
client = new Client({ name: "AlphamailClient", version: "1.0.0" })

# ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë° ìë™ ì¬ì—°ê²°
async def maintain_sse_connection(self):
    while True:
        if not self.sse_connected:
            await self.connect_sse()
        await asyncio.sleep(5)
```

### í•œêµ­ì–´ íŠ¹í™” í…ìŠ¤íŠ¸ ì²˜ë¦¬
ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼ì˜ **ë³µì¡í•œ HTML êµ¬ì¡°ì™€ í•œêµ­ì–´ ì¸ì½”ë”© ë¬¸ì œ**ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì „ìš© í…ìŠ¤íŠ¸ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

```python
def korean_sentence_splitter(text: str) -> List[str]:
    # í•œêµ­ì–´ ë¬¸ì¥ ì¢…ê²°ì–´ë¯¸ì™€ ì˜ì–´ ëŒ€ë¬¸ì êµ¬ë¶„
    sentence_endings = re.compile(r'(?<=[\.\?\!])\s+|\n+|(?<=[ê°€-í£])(?=[A-Z])')
    sentences = sentence_endings.split(text.strip())
    return [s.strip() for s in sentences if s.strip()]

def chunk_sentences(sentences: List[str], chunk_size: int = 256, overlap: int = 64):
    # í† í° ê¸°ë°˜ ì²­í‚¹ + ë¬¸ì¥ ì¤‘ì²©ìœ¼ë¡œ ì˜ë¯¸ ë³´ì¡´
    current_length = sum(len(tokenizer.tokenize(s)) for s in current_chunk)
```

## AI í†µí•© ì›Œí¬í”Œë¡œìš°

### 3ë‹¨ê³„ ì—…ë¬´ ìë™í™” í”„ë¡œì„¸ìŠ¤
ì‚¬ìš©ìì˜ ì´ë©”ì¼ì´ ì‹œìŠ¤í…œì— ë“¤ì–´ì˜¤ë©´ **3ë‹¨ê³„ ìë™í™” í”„ë¡œì„¸ìŠ¤**ë¥¼ í†µí•´ ì—…ë¬´ê°€ ì²˜ë¦¬ë©ë‹ˆë‹¤.

```
1ë‹¨ê³„: ì´ë©”ì¼ ë¶„ì„ â†’ MCP Client â†’ AIê°€ ì—…ë¬´ ìœ í˜• ë¶„ë¥˜
2ë‹¨ê³„: ì •ë³´ ì¶”ì¶œ â†’ MCP Server â†’ êµ¬ì¡°í™”ëœ ë°ì´í„° ìƒì„±  
3ë‹¨ê³„: ì„ì‹œ ì €ì¥ â†’ ì‚¬ìš©ì ê²€í†  â†’ ìµœì¢… ìŠ¹ì¸ í›„ ë“±ë¡
```

### ë²¡í„° ê¸°ë°˜ ë¬¸ì„œ ê´€ë¦¬
ì´ë©”ì¼ê³¼ ì²¨ë¶€íŒŒì¼ì„ **ë²¡í„° ì„ë² ë”©ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰**ì´ ê°€ëŠ¥í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ **ë„ë©”ì¸ë³„ ê·¸ë£¹í•‘ê³¼ ì²­í¬ ì¬ì¡°í•©**ì„ í†µí•´ ë¶„í• ëœ ë¬¸ì„œë¥¼ ì›ë³¸ í˜•íƒœë¡œ ë³µì›í•©ë‹ˆë‹¤.

```python
# ë„ë©”ì¸ë³„ ë¬¸ì„œ ê·¸ë£¹í•‘ ë° ì¬ì¡°í•©
grouped = defaultdict(list)
for doc, meta in zip(documents, metadatas):
    grouped[meta["domain_id"]].append((meta.get("chunk_index", 0), doc))

# ì²­í¬ ìˆœì„œ ë³µì› í›„ ì „ì²´ í…ìŠ¤íŠ¸ ì¬êµ¬ì„±  
for domain_id, chunks in grouped.items():
    chunks.sort(key=lambda x: x[0])
    full_text = "\n".join(doc for _, doc in chunks)
```

## AI ì„œë¹„ìŠ¤ë³„ íŠ¹í™” ê¸°ëŠ¥

### MCP ì‹œìŠ¤í…œ (ì´ë©”ì¼ ì—…ë¬´ ë¶„ì„)
- **ì¤‘ë³µ ë°©ì§€ ë¡œì§**: ê°™ì€ ì—…ë¬´ì— ëŒ€í•œ ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€
- **ë‚ ì§œ ì •ê·œí™”**: í•œêµ­ì–´ ë‚ ì§œ í‘œí˜„ì„ ISO8601 í˜•ì‹ìœ¼ë¡œ ë³€í™˜
- **ë¹„ì¦ˆë‹ˆìŠ¤ ë£° ê²€ì¦**: ë°œì£¼/ê²¬ì  ìš”ì²­ì˜ í•„ìˆ˜ ì •ë³´ í™•ì¸

### OCR ì‹œìŠ¤í…œ (ë¬¸ì„œ ë””ì§€í„¸í™”)  
- **í ê¸°ë°˜ ì²˜ë¦¬**: API í˜¸ì¶œ ì œí•œì„ ê³ ë ¤í•œ ìˆœì°¨ ì²˜ë¦¬
- **í•„ë“œ ë§¤í•‘**: ì‚¬ì—…ìë“±ë¡ì¦ í•„ë“œë¥¼ í•œêµ­ì–´ ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´ë¡œ ë³€í™˜
- **ì˜¤ë¥˜ ë³µêµ¬**: OCR ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

### RAG ì‹œìŠ¤í…œ (ë¬¸ì„œ ìš”ì•½ ë° ì‘ì„±)
- **êµ¬ì¡°í™”ëœ ìš”ì•½**: ğŸ“‹ ì£¼ìš”ë‚´ìš©, âš¡ ê²°ì •ì‚¬í•­, ğŸ’¡ í›„ì†ì¡°ì¹˜ í˜•ì‹
- **ë©€í‹°ëª¨ë‹¬ ì²˜ë¦¬**: PDF/Excel/Word ì²¨ë¶€íŒŒì¼ í…ìŠ¤íŠ¸ ì¶”ì¶œ  
- **í…œí”Œë¦¿ ê¸°ë°˜ ì‘ì„±**: ì‚¬ìš©ì í…œí”Œë¦¿ê³¼ AI ìƒì„± ë‚´ìš© ìœµí•©

### Chatbot (ë¬¸ì„œ ê²€ìƒ‰)
- **ë¼ì¸ ê¸°ë°˜ ì²­í‚¹**: ë‹¨ìˆœí•˜ê³  ë¹ ë¥¸ ë¬¸ì„œ ë¶„í• 
- **ë³µí•© í•„í„°ë§**: ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ì •êµí•œ ê²€ìƒ‰
- **ì‹¤ì‹œê°„ ê²€ìƒ‰**: 50ê°œ ê²°ê³¼ ë‚´ ì¦‰ì‹œ ê²€ìƒ‰

## AI ì‹œìŠ¤í…œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. MCP ì„œë²„ ì—°ê²° ë¶ˆì•ˆì •ì„±ìœ¼ë¡œ ì¸í•œ AI ë¶„ì„ ì‹¤íŒ¨ ë¬¸ì œ

ì´ˆê¸°ì—ëŠ” **MCP í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì™€ì˜ SSE ì—°ê²°ì´ ëŠì–´ì¡Œì„ ë•Œ ìë™ìœ¼ë¡œ ì¬ì—°ê²°ë˜ì§€ ì•Šì•„** AI ë¶„ì„ ìš”ì²­ì´ ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ ì„œë²„ ì¬ì‹œì‘ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ì¼ì‹œ ì¤‘ë‹¨ ì‹œ **í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ìƒíƒœë¥¼ ê°ì§€í•˜ì§€ ëª»í•´ ë¬´í•œ ëŒ€ê¸° ìƒíƒœ**ì— ë¹ ì§€ëŠ” í˜„ìƒì´ ìˆì—ˆìŠµë‹ˆë‹¤.

```python
# ê°œì„  ì „: ë‹¨ìˆœ ì—°ê²°, ì¬ì—°ê²° ë¡œì§ ì—†ìŒ
client = MultiServerMCPClient({"alphaMail": {"url": "http://server:8000/sse"}})

# ê°œì„  í›„: ìë™ ì¬ì—°ê²° ë° ìƒíƒœ ëª¨ë‹ˆí„°ë§
class MCPClientManager:
    async def maintain_sse_connection(self):
        while True:
            if not self.sse_connected:
                try:
                    await self.connect_sse()
                    logger.info("SSE ì—°ê²° ë³µêµ¬ ì„±ê³µ")
                except Exception as e:
                    logger.error(f"SSE ì—°ê²° ì‹¤íŒ¨, 5ì´ˆ í›„ ì¬ì‹œë„: {e}")
            await asyncio.sleep(5)
```

ê·¸ ê²°ê³¼ **ì—°ê²° ì•ˆì •ì„±ì´ í–¥ìƒ**ë˜ì—ˆê³ , AI ë¶„ì„ ì‹¤íŒ¨ìœ¨ì´ **í¬ê²Œ ê°ì†Œ**í–ˆìŠµë‹ˆë‹¤.

---

### 2. í•œêµ­ì–´ ì´ë©”ì¼ í…ìŠ¤íŠ¸ ì¸ì½”ë”© ë° ì²­í‚¹ ì˜¤ë¥˜ ë¬¸ì œ

ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼ì— í¬í•¨ëœ **í•œêµ­ì–´ í…ìŠ¤íŠ¸ì™€ HTML ì¸ì½”ë”©**ì„ ì²˜ë¦¬í•  ë•Œ ë¬¸ìê°€ ê¹¨ì§€ê±°ë‚˜ ë¬¸ì¥ì´ ì¤‘ê°„ì— ì˜ë¦¬ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ `unicode_escape` ì²˜ë¦¬ì™€ **í•œêµ­ì–´ ë¬¸ì¥ ê²½ê³„ ì¸ì‹ ì‹¤íŒ¨**ë¡œ ì¸í•´ AIê°€ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì»¨í…ìŠ¤íŠ¸ë¡œ ì—…ë¬´ë¥¼ ë¶„ë¥˜í•˜ëŠ” ê²½ìš°ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

```python
# ê°œì„  ì „: ë‹¨ìˆœ í…ìŠ¤íŠ¸ ì²˜ë¦¬
def clean_text(text):
    return text.replace('\\', '').strip()

# ê°œì„  í›„: í•œêµ­ì–´ íŠ¹í™” í…ìŠ¤íŠ¸ ì •ê·œí™”
def clean_text(text: str) -> str:
    # ìœ ë‹ˆì½”ë“œ ì´ìŠ¤ì¼€ì´í”„ ë””ì½”ë”©
    if re.search(r'u[0-9a-fA-F]{4}', text):
        text = text.encode('latin1').decode('unicode_escape')
    
    # í•œêµ­ì–´ ë¬¸ì¥ ê²½ê³„ ì •í™•í•œ ì‹ë³„
    sentence_endings = re.compile(r'(?<=[\.\?\!])\s+|\n+|(?<=[ê°€-í£])(?=[A-Z])')
    return sentence_endings.sub(' ', text).strip()
```

ì´ë¥¼ í†µí•´ **í•œêµ­ì–´ í…ìŠ¤íŠ¸ ì²˜ë¦¬ ì •í™•ë„ê°€ í–¥ìƒ**ë˜ì—ˆê³ , AIì˜ **ì—…ë¬´ ë¶„ë¥˜ ì˜¤ë¥˜ìœ¨ì´ ê°ì†Œ**í–ˆìŠµë‹ˆë‹¤.

---

### 3. ëŒ€ìš©ëŸ‰ ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ë¶€ì¡± ë° OCR íƒ€ì„ì•„ì›ƒ ë¬¸ì œ

RAG ì‹œìŠ¤í…œì—ì„œ **40MB ì´ìƒì˜ ëŒ€ìš©ëŸ‰ PDFë‚˜ Excel íŒŒì¼**ì„ ì²˜ë¦¬í•  ë•Œ ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ì„œë²„ê°€ í¬ë˜ì‹œë˜ê±°ë‚˜ OCR API í˜¸ì¶œì´ íƒ€ì„ì•„ì›ƒë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ì´ˆê¸°ì—ëŠ” **íŒŒì¼ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œí•œ í›„ ì²˜ë¦¬**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì¸í•´ ë™ì‹œ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ê¸‰ì¦í–ˆìŠµë‹ˆë‹¤.

```python
# ê°œì„  ì „: ì „ì²´ íŒŒì¼ ë©”ëª¨ë¦¬ ë¡œë“œ
async def extract_text_from_pdf(pdf_content: bytes) -> str:
    pdf_file = io.BytesIO(pdf_content)  # ì „ì²´ íŒŒì¼ ë©”ëª¨ë¦¬ ë¡œë“œ
    reader = PyPDF2.PdfReader(pdf_file)
    return "\n".join(page.extract_text() for page in reader.pages)

# ê°œì„  í›„: ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ + ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬
async def extract_text_from_pdf(pdf_content: bytes) -> str:
    try:
        # íŒŒì¼ í¬ê¸° ì œí•œ ê²€ì¦
        if len(pdf_content) > MAX_ATTACH_SIZE:
            raise HTTPException(400, "íŒŒì¼ í¬ê¸° ì œí•œ ì´ˆê³¼")
            
        # í˜ì´ì§€ë³„ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬
        pdf_file = io.BytesIO(pdf_content)
        reader = PyPDF2.PdfReader(pdf_file)
        
        text_chunks = []
        for i, page in enumerate(reader.pages):
            if i > 100:  # ìµœëŒ€ 100í˜ì´ì§€ ì œí•œ
                break
            text_chunks.append(page.extract_text() or "")
            
        return "\n".join(text_chunks)
    except Exception as e:
        logger.error(f"PDF ì²˜ë¦¬ ì‹¤íŒ¨: {e}")
        return "PDF íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
```

ê°œì„  ê²°ê³¼ **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ í‰ê·  ê°ì†Œ**í–ˆê³ , **ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì„±ê³µë¥ ì´ í–¥ìƒ**ë˜ì—ˆìŠµë‹ˆë‹¤.

## ê¸°ìˆ  ìŠ¤íƒ ë¹„êµ

| ì‹œìŠ¤í…œ | ì–¸ì–´/í”„ë ˆì„ì›Œí¬ | AI ëª¨ë¸ | ë²¡í„°DB | ì „ë¬¸ ë¶„ì•¼ |
|--------|----------------|---------|--------|-----------|
| **MCP Client/Server** | Python + FastAPI | Claude 3.7 Sonnet | - | ì´ë©”ì¼ ë¶„ì„ |
| **MCP (ê°œë°œìš©)** | Node.js + Express | mathstral-7b-v0.1 | - | ë¡œì»¬ ê°œë°œ |
| **RAG System** | Python + FastAPI | Claude 3.7 Sonnet | ChromaDB + KURE-v1 | ë¬¸ì„œ ì²˜ë¦¬ |
| **OCR System** | Node.js + Express | ë„¤ì´ë²„ í´ë¡œë°” OCR | - | ë¬¸ì„œ ì¸ì‹ |
| **Chatbot** | Python + Flask | - | ChromaDB + MiniLM | ë¬¸ì„œ ê²€ìƒ‰ |

-----
-----
-----

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- Docker & Docker Compose
- ìµœì†Œ 8GB RAM
- í¬íŠ¸ 3000, 5000, 5001, 8000, 8001, 8081 ì‚¬ìš© ê°€ëŠ¥

### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone [repository-url]
cd alphamail
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”:

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
DB_URL=jdbc:postgresql://your-db-host:5432/alphamail
DB_USERNAME=your_db_user
DB_PASSWORD=your_db_password

# Redis ì„¤ì •
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password

# AWS ì„¤ì •
YOUR_ACCESS_KEY=your_aws_access_key
YOUR_SECRET_KEY=your_aws_secret_key
AWS_S3_BUCKET_NAME=your_s3_bucket

# JWT ë° ë³´ì•ˆ
JWT_SECRET=your_jwt_secret_key

# AI ì„œë¹„ìŠ¤ API
ANTHROPIC_API_KEY=your_anthropic_api_key
CLAUDE_SECRET_KEY=your_claude_secret
CLAUDE_BASE_URL=https://api.anthropic.com

# OCR ì„œë¹„ìŠ¤
OCR_SECRET=your_ocr_secret
OCR_API_URL=your_ocr_api_url

# í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
VITE_API_URL=http://localhost:8081
VITE_PUBLIC_SERVICE_KEY=your_public_service_key
VITE_PUBLIC_HOLIDAY_API_URL=your_holiday_api_url
```

### 3. Docker Compose ì‹¤í–‰
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ë¹Œë“œ ë° ì‹œì‘
docker-compose up -d --build

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸
docker-compose logs -f backend
```

### 4. ì„œë¹„ìŠ¤ ì ‘ì†
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:8081
- **RAG Server**: http://localhost:5000
- **Chatbot**: http://localhost:5001
- **OCR Server**: http://localhost:3001
- **MCP Server**: http://localhost:8000
- **MCP Client**: http://localhost:8001

### 5. ì„œë¹„ìŠ¤ ì¤‘ì§€
```bash
# ì„œë¹„ìŠ¤ ì¤‘ì§€
docker-compose down

# ë³¼ë¥¨ê¹Œì§€ ì‚­ì œ (ë°ì´í„° ì´ˆê¸°í™”)
docker-compose down -v
```

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### ë¡œì»¬ ê°œë°œ (ì„ íƒì )
ê° ì„œë¹„ìŠ¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ë ¤ë©´:

```bash
# Backend (Spring Boot)
cd backend
./gradlew bootRun

# Frontend 
cd frontend/mail-app
npm install
npm run dev

# Python ì„œë¹„ìŠ¤ (RAG, Chatbot)
cd AI/server/rag
pip install -r requirements.txt
python app.py
```

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤
1. **í¬íŠ¸ ì¶©ëŒ**: ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ê°€ ìˆë‹¤ë©´ docker-compose.ymlì—ì„œ í¬íŠ¸ ë§¤í•‘ ìˆ˜ì •
2. **ë©”ëª¨ë¦¬ ë¶€ì¡±**: Docker ë©”ëª¨ë¦¬ í• ë‹¹ëŸ‰ì„ 8GB ì´ìƒìœ¼ë¡œ ì¦ê°€
3. **í™˜ê²½ë³€ìˆ˜ ëˆ„ë½**: `.env` íŒŒì¼ì˜ ëª¨ë“  í•„ìˆ˜ ë³€ìˆ˜ í™•ì¸
4. **ê¶Œí•œ ë¬¸ì œ**: `gradlew`ì— ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬: `chmod +x backend/gradlew`

### ë¡œê·¸ í™•ì¸
```bash
# ì „ì²´ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker-compose ps

# íŠ¹ì • ì„œë¹„ìŠ¤ ì¬ì‹œì‘
docker-compose restart backend

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ë‹¤ì‹œ ë¹Œë“œ
docker-compose up -d --build frontend
```


